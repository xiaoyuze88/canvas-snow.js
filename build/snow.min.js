/**
 *   Code modified from http://thecodeplayer.com/walkthrough/html5-canvas-snow-effect
 *   
 *   Xiao Yuze(https://github.com/xiaoyuze88/canvas-snow.js)
 */
!function(a){if("object"==typeof exports&&"object"==typeof module)module.exports=a();else{if("function"==typeof define&&define.amd)return define([],a);this.Snow=a()}}(function(){function a(d){if(!(this instanceof a))return new a(d);if(!b.call(this,d))throw new Error("Param error");c.call(this)}function b(a){var c,b={selector:null,canvas:null,num:20,height:null,width:null};for(c in b)b.hasOwnProperty(c)&&(this[c]=c in a?a[c]:b[c]);return(this.selector||this.canvas)&&this.height&&this.width?(this.snows=[],this.rAF,this.cancel=!1,!0):!1}function c(){var a,b,c,d;if(this.canvas)a=document.querySelector(this.canvas);else if(this.selector){if(b=document.querySelector(this.selector),!b)throw new Error("Can't find container with selector "+this.selector);a=document.createElement("canvas"),b.appendChild(a)}if(this.canvas=a,!this.canvas)throw new Error("canvas element is not initilized");if(this.ctx=this.canvas.getContext("2d"),!this.ctx)throw new Error("might no support canvas");for(this.canvas.width=this.width,this.canvas.height=this.height,c=0,d=this.num;d>c;c++)this.snows.push({x:Math.random()*this.width,y:Math.random()*this.height,r:4*Math.random()+1,d:Math.random()*this.num})}function d(){var a,b,c=0;return function d(){function f(){c+=.01;for(var a=0;a<this.num;a++)b=this.snows[a],b.y+=Math.cos(c+b.d)+1+b.r/2,b.x+=2*Math.sin(c),(b.x>this.width+5||b.x<-5||b.y>this.height)&&(this.snows[a]=a%3>0?{x:Math.random()*this.width,y:-10,r:b.r,d:b.d}:Math.sin(c)>0?{x:-5,y:Math.random()*this.height,r:b.r,d:b.d}:{x:this.width+5,y:Math.random()*this.height,r:b.r,d:b.d});this.cancel||requestAnimationFrame(d.bind(this))}this.ctx.clearRect(0,0,this.width,this.height),this.ctx.fillStyle="rgba(255, 255, 255, 0.8)",this.ctx.beginPath();for(var e=0;e<this.num;e++)a=this.snows[e],this.ctx.moveTo(a.x,a.y),this.ctx.arc(a.x,a.y,a.r,0,2*Math.PI,!0);this.ctx.fill(),f.call(this)}.bind(this)}return a.prototype.start=function(){this.cancel=!1;var a=d.call(this);this.rAF=requestAnimationFrame(a)},a.prototype.stop=function(){this.cancel=!0,cancelAnimationFrame(this.raf),setTimeout(function(){this.ctx.clearRect(0,0,this.width,this.height)}.bind(this),50)},function(){var b,c,a=["ms","moz","webkit","o"];for(b=0,c=a.length;c>b&&!window.requestAnimationFrame;b++)window.requestAnimationFrame=window[a[b]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a[b]+"CancelAnimationFrame"]||window[a[b]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a){return"function"==typeof a?window.setTimeout(function(){a()},100/6):void 0}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),a});